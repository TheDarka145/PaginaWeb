<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ferretería</title>
  {% load static %}
  <link rel="icon" href="{% static 'img/icono_navegador.png' %}" />
  <link rel="stylesheet" href="{% static 'css/misEstilos.css' %}" />
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" />
</head>

<body>
  <header>
    <div class="container__menu">
      <div class="menu">
        <nav>
          <ul>
            
            <li><a href="{% url 'index' %}"></a></li>
            <li>
              <a href="{% url 'tienda' %}">Productos</a>
              <ul>
                <li><a href="{% url 'tienda' %}">Herramientas Manuales</a></li>
                <li><a href="{% url 'tienda' %}">Herramientas Eléctricas</a></li>
                <li><a href="{% url 'tienda' %}">Materiales de Construcción</a></li>
                <li><a href="{% url 'tienda' %}">Pinturas y Selladores</a></li>
              </ul>
            </li>
            <li><a href="{% url 'contacto' %}">Contáctanos</a></li>
            <li><a href="{% url 'Nosotros' %}">Sobre Nosotros</a></li>
            <li class="search-bar">
              <input type="text" placeholder="¿Qué buscas?" class="form-control" />
            </li>
            {% if user.is_authenticated %}
              <li>
                <a href="{% url 'perfil' %}"></a>
                <ul>
                  <li><a href="{% url 'productos' %}">Inventario</a></li>
                  <li><a href="{% url 'listar_boletas' %}">Boletas</a></li>
                  <li><a href="{% url 'cerrar' %}">Cerrar sesión</a></li>
                </ul>
              </li>
              <li><a href="{% url 'carrito' %}"></a></li>
            {% else %}
              <li><a href="{% url 'login' %}"></a></li>
              <li><a href="{% url 'carrito' %}"></a></li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <article class="mb-4">
      <div id="mainCarousel" class="carousel slide carousel-fade" data-ride="carousel" data-interval="5000">
        <ol class="carousel-indicators">
          <li data-target="#mainCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#mainCarousel" data-slide-to="1"></li>
          <li data-target="#mainCarousel" data-slide-to="2"></li>
        </ol>

        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="https://www.easy.cl/_next/image?url=https%3A%2F%2Fcontent.easy.cl%2Fcms%2Fcl%2FEasyWeb%2Fview_version%2F661d21f15e16194196623bd1%2Ffd9bb31a-7fe5-4763-b0a6-f8285b0871d3.webp&w=1920&q=75" class="d-block w-100" alt="Promoción 1" />
          </div>
          <div class="carousel-item">
            <img src="https://www.easy.cl/_next/image?url=https%3A%2F%2Fcontent.easy.cl%2Fcms%2Fcl%2FEasyWeb%2Fview_version%2F661d21f15e16194196623bd1%2F164acb5c-8c08-4ee8-98f2-add784ffa231.webp&w=1920&q=75" class="d-block w-100" alt="Promoción 2" />
          </div>
          <div class="carousel-item">
            <img src="https://www.easy.cl/_next/image?url=https%3A%2F%2Fcontent.easy.cl%2Fcms%2Fcl%2FEasyWeb%2Fview_version%2F661d21f15e16194196623bd1%2F8581f635-a782-426b-b8e5-b5af148c7adb.webp&w=1920&q=75" class="d-block w-100" alt="Promoción 3" />
          </div>
        </div>

        <a class="carousel-control-prev" href="#mainCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true" style="background-color: rgba(0,0,0,0.5); border-radius: 50%;"></span>
          <span class="sr-only">Anterior</span>
        </a>
        <a class="carousel-control-next" href="#mainCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true" style="background-color: rgba(0,0,0,0.5); border-radius: 50%;"></span>
          <span class="sr-only">Siguiente</span>
        </a>
      </div>
    </article>

    <article>
      <div class="row">
        <div class="col-md">
          <div class="card">
            <img class="card-img-top" src="https://ferreterialider.com/wp-content/uploads/2022/08/Herramientas-para-la-casa-C-1-800x533.jpg" alt="Herramientas Manuales" />
            <div class="card-body">
              <h4 class="card-title">Herramientas Manuales</h4>
              <a href="{% url 'tienda' %}" class="btncard">Ver más</a>
            </div>
          </div>
        </div>

        <div class="col-md">
          <div class="card">
            <img class="card-img-top" src="https://images.contentstack.io/v3/assets/blt34d59f5b52e53f95/blt20b9331a48548a34/660af2c0dd5b9e5517a88936/catt-pintura-muestras.jpg" alt="Pinturas" />
            <div class="card-body">
              <h4 class="card-title">Pinturas y Acabados</h4>
              <a href="{% url 'tienda' %}" class="btncard">Ver más</a>
            </div>
          </div>
        </div>

        <div class="col-md">
          <div class="card">
            <img class="card-img-top" src="//todoparalaindustria.com/cdn/shop/collections/57307334cb4c6a34da66bf178b715f8a.jpg?v=1699886372&width=1920" alt="Construcción" />
            <div class="card-body">
              <h4 class="card-title">Construcción y Adhesivos</h4>
              <a href="{% url 'tienda' %}" class="btncard">Ver más</a>
            </div>
          </div>
        </div>

        <div class="col-md">
          <div class="card">
            <img class="card-img-top" src="https://floorcenter.cl/wp-content/uploads/ferreteria-con-herramientas-y-materiales-variados-1024x684.jpg" alt="Ferretería General" />
            <div class="card-body">
              <h4 class="card-title">Ferretería General</h4>
              <a href="{% url 'tienda' %}" class="btncard">Ver más</a>
            </div>
          </div>
        </div>
      </div>

    </article>

    <article>
      <div class="remember">
        <img src="https://www.cincopinos.cl/cdn/shop/files/Como_llega_la_Planta_1_1000x.gif?v=1619822712" alt="Recuerda" />
        <div class="remember-description">
          <h2>Importante</h2>
          <p>Algunos productos pueden variar en presentación o empaque según el proveedor o la temporada. Si tienes dudas, contáctanos antes de comprar.</p>
          <p>Siempre revisamos nuestros productos antes de enviarlos para asegurarnos de que estén en óptimas condiciones.</p>
          <p><strong>Además, cada compra que realizas con nosotros contribuye a la plantación de árboles en zonas que lo necesitan. Juntos construimos, y también reforestamos.</strong></p>
          <a href="{% url 'tienda' %}">Ver Productos</a>
        </div>
      </div>
    </article>
    
       <section class="suscripcion-section">
          <div class="container text-center">
            <h2 class="suscripcion-titulo">¿Quieres recibir ofertas especiales?</h2>
            <p class="suscripcion-texto">Suscríbete a nuestro boletín para enterarte primero de nuestras promociones y nuevos productos.</p>

            <form method="POST" id="form-suscripcion" class="suscripcion-form">
              {% csrf_token %}
              <div class="input-group justify-content-center">
                <input type="email" name="email" class="form-control suscripcion-input" placeholder="Tu correo electrónico" required>
                <div class="input-group-append">
                  <button class="btn" style="background-color:#1A5276; color:white;" type="submit">Suscribirme</button>
                </div>
              </div>
            </form>

            <div id="popup-mensaje" style="display:none; margin-top:20px;" class="alert"></div>
          </div>
        </section>
  </main>

  <footer class="pie-pagina">
    <div class="grupo-1">
      <div class="box">
        <figure>
          <a href="#"><img src="{% static 'img/footer.png' %}" alt="Logo footer" /></a>
        </figure>
      </div>
      <div class="box">
        <h2>SOBRE NOSOTROS</h2>
        <p>Somos una ferretería comprometida con el progreso de nuestra comunidad. Iniciamos como un pequeño negocio familiar, y gracias a la confianza de nuestros clientes, hoy contamos con un catálogo amplio y un equipo preparado para ayudarte.</p>
      </div>
      <div class="box">
        <h2>SÍGUENOS</h2>
        <div class="red-social">
          <a href="#"><img src="{% static 'img/facebook_logo.png' %}" alt="Facebook" width="25" height="25" /></a>
          <a href="#"><img src="{% static 'img/ig_logo.png' %}" alt="Instagram" width="25" height="25" /></a>
          <a href="#"><img src="{% static 'img/correo_logo.png' %}" alt="Correo" width="25" height="25" /></a>
        </div>
      </div>
    </div>
    <div class="grupo-2">
      <small>©2025 <b>FERRAMAS</b> - Todos Los Derechos Reservados</small>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="{% static "js/jquery.slim.min.js" %}"><\/script>')</script>
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  <script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("form-suscripcion");
  const popup = document.getElementById("popup-mensaje");

  form.addEventListener("submit", function (e) {
    e.preventDefault(); 

    const formData = new FormData(form);
    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    fetch("{% url 'suscripcion' %}", {
      method: "POST",
      headers: {
        "X-CSRFToken": csrfToken,
      },
      body: formData,
    })
    .then(response => response.json())
    .then(data => {
      popup.style.display = "block";
      popup.classList.remove("alert-danger", "alert-success");

      if (data.success) {
        popup.classList.add("alert-success");
        popup.textContent = data.message;
        form.reset();
      } else {
        popup.classList.add("alert-danger");
        popup.textContent = data.message;
      }

      setTimeout(() => {
        popup.style.display = "none";
      }, 5000);
    })
    .catch(error => {
      popup.style.display = "block";
      popup.classList.add("alert-danger");
      popup.textContent = "Error al procesar la solicitud.";
    });
  });
});
</script>
</body>
</html>
